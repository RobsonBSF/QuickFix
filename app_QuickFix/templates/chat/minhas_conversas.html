{% extends "base.html" %}
{% block content %}

  <h2>Minhas Conversas</h2>

  <h3>ðŸ“¥ Recebidas</h3>
  {% if recebidas %}
    <ul>
      {% for c in recebidas %}
        <li>
          <a class="btn btn-outline-primary" href="{% url 'direct_chat' c.other.id %}">
            Conversa com {{ c.other.username }}
          </a>
          {% if c.last_message %}
            - Ãšltima: {{ c.last_message.content|truncatechars:40 }}
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Nenhuma conversa recebida.</p>
  {% endif %}

  <h3>ðŸ“¤ Iniciadas</h3>
  {% if iniciadas %}
    <ul>
      {% for c in iniciadas %}
        <li>
          <a class="btn btn-outline-success" href="{% url 'direct_chat' c.other.id %}">
            Conversa com {{ c.other.username }}
          </a>
          {% if c.last_message %}
            - Ãšltima: {{ c.last_message.content|truncatechars:40 }}
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>Nenhuma conversa iniciada.</p>
  {% endif %}
{% endblock %}