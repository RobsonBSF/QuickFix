{% extends "area_usuario/base.html" %}
{% load static %}

{% block extra_head %}
<style>
  .form-wrapper {
    max-width: 800px;
    margin: auto;
    background: var(--card-bg);
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.05);
  }
  .dropzone {
    border: 2px dashed #ced4da;
    border-radius: 8px;
    padding: 40px 20px;
    text-align: center;
    color: #868e96;
    transition: background-color 0.2s ease;
  }
  .dropzone:hover {
    background-color: #f1f3f5;
    cursor: pointer;
  }
  .section-title {
    margin-top: 30px;
    margin-bottom: 15px;
    border-left: 4px solid #ffc107;
    padding-left: 10px;
    font-weight: 600;
    color: #343a40;
  }
</style>
{% endblock %}

{% block content %}

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Informações básicas -->
    <h5 class="section-title">Informações básicas</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Título do serviço</label>
        <input type="text" name="titulo" value="{{ servico.titulo|default:'' }}" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">Categoria</label>
        <select name="categoria" class="form-select" required>
          <option disabled selected>{{ servico.categoria|default:'Escolha uma categoria'}}</option>
          <option>Limpeza</option>
          <option>Manutenção</option>
          <option>Serviços Técnicos</option>
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">Breve descrição</label>
        <input type="text" name="descricao" value="{{ servico.descricao|default:'' }}" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label">Tempo estimado (horas)</label>
        <input type="number" name="tempo_estimado" class="form-control" value="{{servico.tempo_estimado|default:'0'}}" min="0" required>
      </div>

      <div class="col-md-6">
        <label class="form-label">Preço</label>
        <div class="input-group">
          <span class="input-group-text">R$</span>
          <input type="number" name="preco" value="{{ servico.preco|stringformat:'.2f'|default:'' }}" class="form-control" required step="0.01" min="1">
        </div>
      </div>
    </div>

    <!-- Local de atendimento -->
    <h5 class="section-title">Local de atendimento</h5>
    <div class="form-check form-check-inline">
      <input class="form-check-input" type="checkbox" name="presencial" id="presencial" {% if servico.atendimento.presencial %}checked{% endif %}>
      <label class="form-check-label" for="presencial">Presencial</label>
    </div>
    <div class="form-check form-check-inline mb-3">
      <input class="form-check-input" type="checkbox" name="remoto" id="remoto" {% if servico.atendimento.remoto %}checked{% endif %}>
      <label class="form-check-label" for="remoto">Remoto</label>
    </div>

    <div class="input-group mb-4">
      <input type="text" name="endereco" value="{{servico.atendimento.endereco}}" class="form-control" placeholder="Endereço ou CEP">
      <button class="btn btn-outline-secondary" type="button">Buscar</button>
    </div>

    <!-- Upload de imagem -->
    <div class="mb-4">
      <label class="form-label">Imagens do serviço</label>
      <div class="dropzone">
        <i class="fas fa-image fa-2x mb-2"></i><br>
          Arraste ou clique para enviar imagens
        <input type="file" name="input_image" multiple >
      </div>
    </div>

    <!-- Requisitos -->
    <h5 class="section-title">Requisitos especiais</h5>
    <textarea class="form-control mb-4" rows="3" name="requisitos" placeholder="Ex: É necessário escada, acesso a energia...">{{ servico.requisitos|default:'' }}</textarea>

    <!-- Política -->
    <div class="form-check mb-4">
      <input class="form-check-input" type="checkbox" name="cancelamento" id="politica" {% if servico.cancelamento %}checked{% endif %}>
      <label class="form-check-label" for="politica">
        Aceito cancelamento gratuito com 24h de antecedência
      </label>
    </div>

    <div class="d-grid">
      <button type="submit" class="btn btn-warning btn-lg">
        {% if servico %}
          Editar servico
        {% else %}
          Cadastrar servico
        {% endif %}
      </button>
    </div>
  </form>

{% endblock %}
